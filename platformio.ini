[env:esp32dev]
platform = espressif32
board = esp32dev
framework = arduino
monitor_speed = 115200

; 書き込み速度を極限まで高速化 (2000000)
; ※エラーが出る場合は 921600 か 115200 に下げてください
upload_speed = 1000000

; ポートは自動認識に任せる（COM3固定を解除）
; upload_port = COM3

; ファームウェアサイズ最適化（書き込み時間短縮）
build_flags = 
    -Os                    ; サイズ最適化
    -DCORE_DEBUG_LEVEL=0   ; デバッグログ無効化
    -ffunction-sections    ; 未使用関数削除
    -fdata-sections
    -DCONFIG_ESP_TASK_WDT_TIMEOUT_S=15     ; Watchdog Timerタイムアウト15秒に延長
    -DCONFIG_ESP_INT_WDT_TIMEOUT_MS=800    ; Interrupt Watchdog 800ms
    -DCONFIG_BROWNOUT_DET_LVL=2            ; ブラウンアウト検出レベル (2=2.2V)
build_unflags = 
    -O2                    ; デフォルトの最適化を無効化

lib_deps =
    madhephaestus/ESP32Servo
    tzapu/WiFiManager
    DNSServer
